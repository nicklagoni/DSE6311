"0","# List to rename variables for prettier viewing in the plots."
"0","pretty_names <- c("
"0","  lag1_other_algae_green                                  = ""Other green algae"","
"0","  lag1_other_algae_red                                    = ""Other red algae"","
"0","  lag1_articulated_corallines                             = ""Articulated corallines"","
"0","  lag1_ascophyllum_epibont                                = ""Ascophyllum epibiont"","
"0","  lag1_knotted_wrack_a_nodosum                            = ""Knotted wrack (Ascophyllum nodosum)"","
"0","  lag1_barnacle_e_g_s_balanoides                          = ""Barnacles"","
"0","  lag1_irish_moss_chondrus_mastocarpus                    = ""Irish moss (Chondrus/Mastocarpus)"","
"0","  lag1_fucus_epibiont                                     = ""Fucus epibiont"","
"0","  lag1_rockweed_fucus_spp                                 = ""Rockweed (Fucus vesiculosus)"","
"0","  lag1_kelp_e_g_laminaria_alaria                          = ""Kelp (Laminaria/Alaria)"","
"0","  lag1_mussel_e_g_mytilus_edulis                          = ""Blue mussel"","
"0","  lag1_crustose_non_coraline                              = ""Crustose non-coralline algae"","
"0","  lag1_other_invertebrate                                 = ""Other invertebrates"","
"0","  lag1_other_substrate                                    = ""Other substrate"","
"0","  lag1_dulse_palmaria_palmata                             = ""Dulse (Palmaria palmata)"","
"0","  lag1_laver_porphyra_spp                                 = ""Laver (Porphyra spp.)"","
"0","  lag1_rock                                               = ""Rock"","
"0","  lag1_sea_lettuce_ulva_lactuca                           = ""Sea lettuce (Ulva lactuca)"","
"0","  lag1_unidentified                                       = ""Unidentified substrate"","
"0","  lag1_common_periwinkle_littorina_littorea               = ""Common periwinkle (L. littorea) count"","
"0","  lag1_smooth_periwinkle_littorina_obtusata               = ""Smooth periwinkle (L. obtusata) count"","
"0","  lag1_rough_periwinkle_littorina_saxatilis               = ""Rough periwinkle (L. saxatilis) count"","
"0","  lag1_dogwhelk_nucella_lapillus                          = ""Dogwhelk count (N. lapillus)"","
"0","  lag1_limpet_tectura_testudinalis                        = ""Limpet count (T. testudinalis)"","
"0","  lag1_smooth_periwinkle_littorina_obtusata_mean_measure  = ""Smooth periwinkle (L. obtusata) mean size"","
"0","  lag1_common_periwinkle_littorina_littorea_mean_measure  = ""Common periwinkle (L. littorea) mean size"","
"0","  lag1_dogwhelk_nucella_lapillus_mean_measure             = ""Dogwhelk mean size (N. lapillus)"","
"0","  lag1_limpet_tectura_testudinalis_mean_measure           = ""Limpet mean size (T. testudinalis)"","
"0","  lag1_rough_periwinkle_littorina_saxatilis_mean_measure  = ""Rough periwinkle (L. saxatilis) mean size"""
"0",")"
"0",""
"0","#Pulling SHAP values from xgboost output"
"0","shap_values_asco <- shap.values("
"0","  xgb_model = xgb_results$XGB_Models$Ascophyllum,"
"0","  X_train = as.matrix(xgb_results$Test_Data[, xgb_results$Predictors]))"
"0",""
"0","# Prepping data into proper format for SHAP plot"
"0","shap_long_asco <- shap.prep("
"0","  shap_contrib = shap_values_asco$shap_score,"
"0","  X_train = as.matrix(xgb_results$Test_Data[, xgb_results$Predictors]))%>%"
"0","  mutate(variable = recode(variable, !!!pretty_names))"
"0",""
"0","# SHAP plot"
"0","(shap.plot.summary(shap_long_asco)+"
"0","  ggtitle(""Impact of Time Lagged Predictor Variables on Model \nPrediction of Ascophyllum Nodosum Percent Cover"")+"
"0","  xlab(""Time Lagged Predictors (1 year)""))%>%"
"0","  ggsave(filename = ""shap_asco_plot.png"")"
"2","[38;5;254mSaving 7 x 7 in image[39m"
"0","#Repeating steps for Fucus"
"0","shap_values_fuc <- shap.values("
"0","  xgb_model = xgb_results$XGB_Models$Fucus,"
"0","  X_train = as.matrix(xgb_results$Test_Data[, xgb_results$Predictors]))"
"0",""
"0","# Prepping data into proper format for SHAP plot"
"0","shap_long_fuc <- shap.prep("
"0","  shap_contrib = shap_values_fuc$shap_score,"
"0","  X_train = as.matrix(xgb_results$Test_Data[, xgb_results$Predictors]))%>%"
"0","  mutate(variable = recode(variable, !!!pretty_names))"
"0",""
"0","# SHAP plot"
"0","(shap.plot.summary(shap_long_fuc)+"
"0","  ggtitle(""Impact of Time Lagged Predictor Variables on Model \nPrediction of Fucus Vesiculosus Percent Cover"")+"
"0","  xlab(""Time Lagged Predictors (1 year)""))%>%"
"0","  ggsave(filename = ""shap_fucus_plot.png"")"
